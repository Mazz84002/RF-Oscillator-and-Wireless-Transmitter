#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\usepackage{fullpage}
\usepackage{circuitikz}
\usetikzlibrary{arrows}
\usepackage[skins,theorems]{tcolorbox}
\tcbset{highlight math style={enhanced,
  colframe=red,colback=white,arc=0pt,boxrule=1pt}}
\end_preamble
\use_default_options true
\begin_modules
theorems-ams
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date true
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Voltage-Controlled RF Oscillator Circuits: A Design Project
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Formula 
\[
\begin{array}{cc}
\text{Author:} & \;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\text{Nir Jonathan Finch-Cohen and Mazz Sheikh}\\
\text{\;\;\;\;\;Supervisor:} & \text{Edoh Shaulov}
\end{array}
\]

\end_inset


\end_layout

\begin_layout Standard
\noindent
A final research and design project conducted for BSc Electrical Engineering
 at Tel Aviv University.
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Background and Objectives
\end_layout

\begin_layout Section
Voltage-Controlled Oscillators (VCOs)
\end_layout

\begin_layout Subsection
VCOs and their applications
\end_layout

\begin_layout Standard
\begin_inset Formula $\emph{Voltage Controlled Oscillators}$
\end_inset

(VCOs) are circuits that take a DC voltage input, based off of which they
 output an oscillating(AC) voltage output.
 This can take the form of a square wave, saw-tooth wave or sinusoid.
 VCOs are ubiquitous in the microelectronics of handeld devices and are
 found abundantly in communication systems, digital and analogue circuits
 and RFIC in general.
 
\end_layout

\begin_layout Example
\begin_inset Formula $\emph{Analog Modulation}$
\end_inset

 - Modern communication systems transmit information using modulation systems,
 such as 
\begin_inset Formula $\emph{Double Side-Band}-\emph{Surpressed Carrier}$
\end_inset

(DSB-SC) whereby baseband signal sent using a (usually high) 'carrier frequency'.
 This carrier frequency is entered through a mixer along with the baseband
 signal and the product is what is sent along the channel.
 From there it is easy for a DSB-SC receiver demodulate the signal and access
 the signal.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{center}  
\backslash
begin{tikzpicture}          
\backslash
node[draw, circle, minimum size=0.6cm, fill=red] (add1) at (-3,0){};    
      
\backslash
draw (add1.north west) -- (add1.south east)     (add1.south west) -- (add1.north
 east);          
\backslash
draw[-stealth] (add1.east) -- ++(2,0) node[at end,right]{$y(t)=c(t)
\backslash
cdot x(t)$};          
\backslash
draw[stealth-] (add1.south) -- ++(0,-1)      node[at end,below]{$c(t)=V_c
 
\backslash
cos
\backslash
omega_c t$};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw[stealth-] (add1.west) -- ++(-2,0) node[at end,left]{$x(t)$};       
   
\backslash
end{tikzpicture} 
\backslash
end{center}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
DSB-SC XMTR
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Example
\begin_inset Formula $\emph{Phase Locked Loops (PLL)}$
\end_inset

 - PLL circuits are used to convert unstable frequency inputs into stable
 AC frequency outputs.
 It generally consists of three sequential devices connected in feedback.
 A VCO is used to output a wave of frequency determined by a DC input voltage.
 PLLs are used abundantly in communication systems.
\end_layout

\begin_layout Subsection
Mathematical model of VCOs
\end_layout

\begin_layout Standard
As discussed, VCO design endeavours to implement an alternating output based
 on a DC voltage input.
 It is often required for the output to have adjustable properties, such
 that the frequency is malleable with the DC input (voltage 
\begin_inset Formula $\emph{controlled}$
\end_inset

) in some specified range.
 It is not obvious how output frequency can be controlled by a DC input,
 so we may begin with a mathematical model which can then be matched to
 the properties of known components that could then be used in an implementation.
 Therefore, considering the following formal definition for a VCO.
\begin_inset CommandInset citation
LatexCommand cite
key "key-1"
literal "false"

\end_inset


\end_layout

\begin_layout Definition*
\begin_inset Formula $\emph{Ideal Voltage-Controlled Oscillator Model \ensuremath{\sim}}$
\end_inset

A VCO generates an alternating output at a frequency 
\begin_inset Formula $\omega_{o}$
\end_inset

 given by a linear function of an input DC voltage,
\begin_inset Formula 
\[
\omega_{o}=\omega_{f}+K_{VCO}V_{\text{c}}
\]

\end_inset


\end_layout

\begin_layout Definition*
\noindent
where, 
\begin_inset Formula $\omega_{f}$
\end_inset

 is some 'free running' or basis frequency, 
\begin_inset Formula $K_{VCO}$
\end_inset

 [
\begin_inset Formula $\text{rad}s^{-1}V^{-1}$
\end_inset

] is the gain of the VCO and 
\begin_inset Formula $V_{c}$
\end_inset

 is the input control voltage.
 The inclusion of the free-running voltage is to ensure that, given our
 input range, the output frequency is not near DC.
 
\begin_inset Formula $\omega_{f}$
\end_inset

 is the frequency about which the output is adjustable.
 Note that phase is given by the integral of frequency with respect to time.
 This gives,
\begin_inset Formula 
\[
v_{VCO}(t)=A_{VCO}\cos\Big(\omega_{f}t+\phi_{0}+K_{VCO}\intop_{-\infty}^{t}V_{\text{c}}dt\Big)
\]

\end_inset


\end_layout

\begin_layout Definition*
\noindent
Where 
\begin_inset Formula $\phi_{0}$
\end_inset

 denotes the initial phase.
\end_layout

\begin_layout Remark*
We now can seek to orient our design approach around physical systems that
 will track this requirement.
\end_layout

\begin_layout Remark*
\noindent

\end_layout

\begin_layout Subsection
Circuits that Oscillate
\end_layout

\begin_layout Standard
Due to the periodic nature of the oscillating output that we intend to produce,
 it is clear that oscillating circuits should employ feedback mechanisms.
 For this reason, RF circuits designed to produce an oscillating output
 will usually be analysed using techniques used for standard feedback mechanisms
\begin_inset CommandInset citation
LatexCommand cite
key "key-1"
literal "false"

\end_inset

.
 Therefore, we will consider a general oscillating systems as a standard
 feedback system that satisfies specific properties.
\end_layout

\begin_layout Standard
\noindent
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}     
\backslash
node [draw, fill= blue, minimum width=1.1cm, minimum height=1.1cm]  (g) at
 (-1,0) {
\backslash
textcolor{white}{H(s)}};          
\backslash
node[draw, circle, minimum size=0.6cm, fill=green] (add1) at (-3,0){};  
                
\backslash
draw (add1.north) -- (add1.south)     (add1.west) -- (add1.east);          
     
\backslash
draw[-stealth] (add1.east) -- (g.west) node[midway,above]{};          
\backslash
draw (g.east) -| (1,-2) node[midway,above]{};          
\backslash
draw[-stealth] (1,-2) -| (add1.south)      node[near end,left]{$+$};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw[stealth-] (add1.west) -- ++(-1,0) node[midway,above]{$X(s)
\backslash
;
\backslash
;
\backslash
;+$};     
\backslash
draw [-stealth](1,0)--++(1,0) node[right]{$V_{o}$}    
\end_layout

\begin_layout Plain Layout

                
\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Feedback system
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
Such a positive feedback system has transfer function given by the following,
\begin_inset Formula 
\[
\frac{V_{o}(s)}{X(s)}=\frac{H(s)}{1-H(s)}
\]

\end_inset


\end_layout

\begin_layout Theorem*
\noindent

\series bold
Barkhausen's Criterion - 
\series default
In order for a feedback system of the form in Figure 2 to oscillate at frequency
 
\begin_inset Formula $s_{o}$
\end_inset

, the following two criteria are necessary precursors,
\end_layout

\begin_layout Enumerate
The loop gain magnitude satisfies: 
\begin_inset Formula $|H(s_{o})|=1$
\end_inset


\end_layout

\begin_layout Enumerate
The total phase shift satisfies: 
\begin_inset Formula $\varangle H(s_{o})=0$
\end_inset

 (or 180 degrees in the case of negative feedback)
\end_layout

\begin_layout Standard
An interesting consequence that we deduce from this is that, given analysis
 under a Laplace transform, sustained oscillations can only occur at purely
 imaginary complex frequencies.
 This is intuitive as it corresponds to oscillation at a particular amplitude.
 I discuss below several examples where it can be seen that such a criteria
 aligns itself with Barkhausen's Criterion.
 Note that the phase shift criterion is intuitive; the central characteristic
 in an oscillating circuit would be that given some 'reaction' to an input
 sinuisoid, the oscillation is produced.
 We can guarantee the persistence of this 'reaction' each cycle if the phase
 shift is 0 degrees, as the circuit is brought back to the state at which
 the input signal began.
 In essence, the condition ensures that the feedback reinforces the initial
 signal that was present at the input.
 Noting this also helps make clear why, in the case of negative feedback,
 a 180 degree shift is what is needed.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Example
Non-Oscillating Circuits - The circuit in Figure 3 is found in Razavi's
 CMOS design book as an example for a non-oscillating circuit.
 It is fed with a DC bias voltage.
 Can it ever produce an oscillating signal 
\begin_inset Formula $V_{out}$
\end_inset

? No.
 It is explained, as below, that the Barkhausen criteria is unsatisfied.
 We will show this via small signal analysis too.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}     
\backslash
ctikzset{tripoles/mos style=arrows}     
\backslash
ctikzset{transistors/arrow pos=end}     
\backslash
draw (0,0) node[nmos] (nmos) {};          
\backslash
draw (nmos.D) to[R, l=$R$] ++(0,2) coordinate (vdd);     
\backslash
draw (nmos.D) to ++(1,0) coordinate (vo);     
\backslash
draw (vo) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo) to ++(1,0) node[] {} coordinate (out){};     
\backslash
draw (out) to ++(0,-2.5) node[] {} coordinate (base1);     
\backslash
draw (base1) to ++(-3,0) node[] {} coordinate (base2) ;     
\backslash
draw (base2) to (nmos.G) ;     
\backslash
node at (out)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (nmos.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd) {};     
\backslash
node[above=0.4cm] at (vdd) {$V_{DD}$}; 
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Single NMOS Feedback Circuit
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Claim*
This circuit does not support sustained oscillations
\end_layout

\begin_layout Claim*
\noindent
I will discuss two ways of seeing this.
\end_layout

\begin_layout Enumerate

\series bold
Necessary Oscillation Criteria - 
\series default
Consider Barkhausen's Criterion.
 If we consider the connection from the gate to the drain as the open loop,
 and the connection between the drain and gate as the feedback, we can analyse
 the phase shifts in this circuit.
 The common-source configuration, biased at some source drain current, adds
 180 degrees of phase.
 This is clear from its gain profile, given by,
\begin_inset Formula 
\[
A_{cs}=-\frac{g_{m}R_{D}}{1+g_{m}R_{S}}\to-g_{m}R<0
\]

\end_inset

which inverts the input signal.
 The capacitor adds 0 to 90 degrees of phase.
 Thus the total phase shift of 180 to 270 does not meet the necessary condition
 for oscillation.
\end_layout

\begin_layout Enumerate

\series bold
Small Signal Analysis - 
\series default
Consider the small signal model of Figure 3, as shown in Figure 4.
 We are interested in considering whether or not this circuit can support
 small-signal oscillations, without using the above phase consideration.
 Consider the above SSM in the Laplace complex frequency domain.
 In principle the 
\begin_inset Formula $s$
\end_inset

-parameter takes the form 
\begin_inset Formula $s=\sigma+j\omega$
\end_inset

,
\begin_inset Formula $\;\sigma,\omega\in\mathbb{R}$
\end_inset

.
 We claim, as discussed above, that for sustained oscillations, the complex
 frequency at which the circuit operates must have an imaginary part - we
 should have no exponential growth and instead a pure sinusoidal output
 with possibly decay.
 Can such a circuit support this?
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}[american, voltage shift=0.5]     
\backslash
draw (0,0) node[ground,rotate=180]{} to[resistor, l=${R}$] (0,-2);     
\backslash
draw (0,-2) to[isource,fill = yellow,l_=$g_mV_{gs}$] (0,-4) node[ground]{};
     
\backslash
draw (0,-2) to (1.2,-2);     
\backslash
draw (1.2,-2) to[resistor, l=${r_{ds}}$] (1.2,-4) node[ground]{};     
\backslash
draw (1.2,-2) to (2.4,-2);     
\backslash
draw (2.4,-2) to[capacitor, l=${C}$] (2.4,-4) node[ground]{};     
\backslash
draw (2.4,-2) to (3.4,-2) to (3.4,-5) to (-1.5,-5) to (-1.5, -2) to (-1,-2);
          
\backslash
node at (-1,-2)[circle,fill,inner sep=2pt, label=above: $g$]{}; 
\backslash
node at (3.4,-2)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{};
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Small Signal Model of Figure 3
\end_layout

\end_inset


\end_layout

\end_inset

Consider the following transformation, and then Thevenin equivalent circuit,
 
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}[american, voltage shift=0.5]     
\backslash
draw (0,-2) to[isource,fill = yellow,l_=$g_mV_{gs}$] (0,-4) node[ground]{};
     
\backslash
draw (0,-2) to (1.2,-2);     
\backslash
draw(1.2,-2) to (3.4,-2)     
\backslash
draw (1.2,-2) to[resistor, l=${r_{ds}}||R||
\backslash
frac{1}{sC}$] (1.2,-4) node[ground]{};     
\backslash
node at (3.4,-2)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{};
\end_layout

\begin_layout Plain Layout

     
\backslash
draw (6.5,-4) node[ground]{} to[vsource, fill=cyan,l_=$g_mV_{gs}
\backslash
cdot {r_{ds}}||R||
\backslash
frac{1}{sC}$] (6.5,-2);     
\backslash
draw (6.5,-2) to[resistor, l=${r_{ds}}||R||
\backslash
frac{1}{sC}$] (9.9,-2);     
\backslash
node at (9.9,-2)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{}; 
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Figure 4 equivalents
\end_layout

\end_inset


\end_layout

\end_inset

This gives that, in the Laplace domain model, (note 
\begin_inset Formula $V_{g}=V_{gs}=V_{out}$
\end_inset

)
\begin_inset Formula 
\[
V_{out}+g_{m}V_{out}\cdot r_{ds}||R||\frac{1}{sC}=0
\]

\end_inset

And therefore,
\begin_inset Formula 
\[
V_{out}(1+g_{m}\cdot r_{ds}||R||\frac{1}{sC})=0
\]

\end_inset

Let us assume for now(without basis) that the circuit can product some small
 signal non-zero output.
 This may, in any case, be false, but given that we are trying 
\begin_inset Formula $\emph{to disprove}$
\end_inset

 the propensity of this circuit to oscillate, it suffices.
 Thus we need to analyse the frequencies at which the parenthesised quantity
 vanishes.
 I claim that there exists no 
\begin_inset Formula $\omega_{o}\in\mathbb{R}$
\end_inset

such that 
\begin_inset Formula $s_{o}=j\omega_{o}$
\end_inset

.
 This is clear from the below steps.
\begin_inset Formula 
\[
1+g_{m}\cdot r_{ds}||R||\frac{1}{sC}=0\implies1+\frac{g_{m}}{\underbrace{\frac{1}{R}+\frac{1}{r_{ds}}}_{\boldsymbol{Def\cdot}k>0}+sC}=0\implies\underbrace{(g_{m}+k)}_{>0}+Cs=0\implies s_{0}=\frac{-(g_{m}+k)}{C}\in\mathbb{R^{-}}
\]

\end_inset

Hence, there exists no viable oscillatory frequency at which the output
 can be sustained.
 This lines up with that obtained by Barkhausen's Criterion.
 For intuition, let us consider how the circuit could be modified so as
 to ensure it can support sustained oscillations? Could an additional common
 source stage and idential capacitor output connection in the open loop
 suffice? No.
 Let us, again, consider why.
 In this case, the phase shift can, in principle, suffice as we can reach
 180 degrees of shift, but recall that for such a shift, the feedback must
 necessarily be negative.
 Therefore, Razavi notes that at DC frequency, the circuit can become fixed
 at DC voltages and not exhibit any changing behaviour.
 Note that the frequencies at which the phase shift criterion is fulfilled
 are very important.
 If the above circuit was simply reorganised with a subtractor to ensire
 the presence of negative feedback, this would also not suffice, as the
 180 degree total phase shift introduced by the capacitors is such only
 at infinite frequency, at which the closed loop gain of the circuit tends
 to zero.
 This example, also given by Razavi, helps to illustrate the necessity of
 compatibility between the conditions of the circuit that are demanded by
 the need for oscillation.
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}     
\backslash
ctikzset{tripoles/mos style=arrows}     
\backslash
ctikzset{transistors/arrow pos=end}     
\backslash
draw (0,0) node[nmos] (nmos) {};               
\backslash
draw (nmos.D) to[R, l=$R$] ++(0,2) coordinate (vdd);     
\backslash
draw (nmos.D) to ++(1,0) coordinate (vo);     
\backslash
draw (vo) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo) to ++(1,0) node[] {} coordinate (out){};     
\backslash
draw (nmos.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd) {};     
\backslash
node[above=0.4cm] at (vdd) {$V_{DD}$};
\end_layout

\begin_layout Plain Layout

            
\backslash
draw (3,0) node[nmos] (nmos2) {};          
\backslash
draw (nmos2.D) to[R, l=$R$] ++(0,2) coordinate (vdd2);     
\backslash
draw (nmos2.D) to ++(1,0) coordinate (vo2);     
\backslash
draw (vo2) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo2) to ++(1,0) node[] {} coordinate (out2){};     
\backslash
draw (out2) to ++(0,-2.5) node[] {} coordinate (base3);     
\backslash
draw (base3) to ++(-6,0) node[] {} coordinate (base4) ;     
\backslash
draw (base4) to (nmos.G);     
\backslash
node at (out2)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (nmos2.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd2) {};     
\backslash
node[above=0.4cm] at (vdd2) {$V_{DD}$};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (out) to (nmos2.G); 
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Double NMOS feedback circuit
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Example
An Oscillating Circuit - The circuit in Figure 7 is fed with a DC bias voltage.
 Can it ever produce an oscillating signal 
\begin_inset Formula $V_{out}$
\end_inset

? Yes.
 It can be seen that it satisfies the phase oscillation criterion.
 How can this been seen with small signal analysis?
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}     
\backslash
ctikzset{tripoles/mos style=arrows}     
\backslash
ctikzset{transistors/arrow pos=end}     
\backslash
draw (0,0) node[nmos] (nmos) {};               
\backslash
draw (nmos.D) to[R, l=$R$] ++(0,2) coordinate (vdd);     
\backslash
draw (nmos.D) to ++(1,0) coordinate (vo);     
\backslash
draw (vo) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo) to ++(1,0) node[] {} coordinate (out){};     
\backslash
draw (nmos.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd) {};     
\backslash
node[above=0.4cm] at (vdd) {$V_{DD}$};
\end_layout

\begin_layout Plain Layout

       
\backslash
draw (3,0) node[nmos] (nmos2) {};          
\backslash
draw (nmos2.D) to[R, l=$R$] ++(0,2) coordinate (vdd2);     
\backslash
draw (nmos2.D) to ++(1,0) coordinate (vo2);     
\backslash
draw (vo2) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo2) to ++(1,0) node[] {} coordinate (out2){};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (nmos2.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd2) {};     
\backslash
node[above=0.4cm] at (vdd2) {$V_{DD}$};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (out) to (nmos2.G);
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (6,0) node[nmos] (nmos3) {};          
\backslash
draw (nmos3.D) to[R, l=$R$] ++(0,2) coordinate (vdd3);     
\backslash
draw (nmos3.D) to ++(1,0) coordinate (vo3);     
\backslash
draw (vo3) to[C, l=$C$] ++(0,-1.65) node[ground] {};     
\backslash
draw (vo3) to ++(1,0) node[] {} coordinate (out3){};     
\backslash
draw (out3) to ++(0,-2.5) node[] {} coordinate (base5);     
\backslash
draw (base5) to ++(-9,0) node[] {} coordinate (base6) ;     
\backslash
draw (base6) to (nmos.G);     
\backslash
node at (out3)[circle,fill,inner sep=2pt, label=right: $V_{out}$]{};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (nmos3.S) -- ++(0,-0.1) node[ground] {};          
\backslash
node[vcc] at (vdd3) {};     
\backslash
node[above=0.4cm] at (vdd3) {$V_{DD}$};
\end_layout

\begin_layout Plain Layout

    
\backslash
draw (out2) to (nmos3.G); 
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
3 stage NMOS feedback circuit
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Example
\noindent
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Subsection
Properties of oscillating circuits
\end_layout

\begin_layout Subsubsection
Phase noise
\end_layout

\begin_layout Subsubsection
Tuning range
\end_layout

\begin_layout Subsubsection
DC to RF efficiency
\end_layout

\begin_layout Subsection
LC Oscillators
\end_layout

\begin_layout Subsubsection
Basics of LC Oscillators
\end_layout

\begin_layout Standard
An LC Oscillators, like a general VCO, recieves a DC voltage input and gives
 an AC voltage output.
 The output can take a variety of forms, including square waves, saw-toothed
 waves and sinusoids, though the design topology will vary in each case.
 As has been discussed in regards to oscillators in general, LC oscillators
 deploy feedback and gain stages in order to sustain their oscillations.
 LC oscillators use a DC source to power a feedback resonator circuit which
 ensures that the DC input sustains oscillations at some particular resonant
 frequency that the designer is free to change, by altering component choices
 and circuit topology.
 Thus, for an LC oscillator, we need three critical parts:
\end_layout

\begin_layout Itemize
Amplification stage(s)
\end_layout

\begin_layout Itemize
Feedback connection
\end_layout

\begin_layout Itemize
Frequency selecting network
\end_layout

\begin_layout Standard
The role of these sections are described in brief.
 The most abstruse of the above components is likely the 
\begin_inset Formula $\emph{frequency selecting network}$
\end_inset

.
 This is essentailly a passive circuit comprised of inductors, capacitors
 and resistors that form a band pass filter which is necessary to ensure
 that the feedback network only returns signal at the frequency at which
 sustained oscillations are demanded.
 VCOs are typically designed with a particular frequencys or very narrow
 set of frequencies as an output.
 The selecting network acts to use the feedback mechanism to 'clean' the
 signal and refine it to the desired frequency.
 Differing frequencies are filtered out.
 Meanwhile, the amplification stage, being far more intuitive, is needed
 to account for the fact that the circuit is inevitably subject to losses.
 As has been discussed, a simple LC pair, when connected with some non-zero
 initial state, will oscillate with energy being echanged between electric
 and magnetic fields, stored between the capacitor's plates and in the inductors
 core, respectively.
 However, such a device would never, alone, be used as an oscillatory circuit,
 because losses would result in the AC signal decaying.
 Therefore, in LC oscillators, the amplification stage used the DC input
 to amplify the AC signal continuously, thus dealing compensating for losses.
 Note that this is not the only reason for an amplification stage, but it
 is a highly salient one.
\end_layout

\begin_layout Subsubsection
Resonance effects
\end_layout

\begin_layout Standard
Resonance is a physical property (not exclusive to electronics) that exists
 in systems with the propensity to store energy in various components.
 When such systems are excited with an input, these systems can start to
 undergo oscillations at frequencies that are determined by the physical
 properties of the system itself, and that are sustained by energy moving
 between the system's components.
 Note that energy tends to be lost as oscillations occur, so, in the absence
 of continuous power input, such oscillations often slowly come to a stop.
 Resonance occurs when the input frequency is matched to the components
 in such a way that allows to for near-complete power-transfer between the
 components in an oscillatory manner.
\end_layout

\begin_layout Example
\begin_inset Formula $\emph{Ideal LC Pair}$
\end_inset

 - A critical form of resonance that is exploited in the design of many
 oscillators is that of a parallel inductor-capacitor pair.
 We can begin to understand how it works by first qualitatively considering
 the function of inductors and capacitors .
 Both inductors and capacitors are storage elements, but store energy in
 different ways, and therefore exhibit different characteristic behaviours
 when connected in circuits.
 Inductors stored energy in the magnetic field that is induced in their
 core when a changing current passes.
 Inductors resultingly have a property of resistance to a change in current
 through them.
 Capacitors store energy in an electric field between plates that are charged
 when current passed.
 The phenomenon of capactor charging is intrinsically one which entails
 increases and decreases in current.
 We can demonstrate this, to begin with, with a thought experiment.
 
\end_layout

\begin_layout Example
\noindent
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}
\backslash
draw (0,0) to (2,0) to[capacitor, label =${C}$] (2,2) to (0,2) to[cute inductor,
 label=${L}$] (0,0);
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Ideal LC Pair
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Example
\noindent
Consider the a charged capacitor connected to an inductor.
 The The capacitor begins to discharge, as current flows through the inductor.
 This is a time-varying current, which therefore produces a magnetic field
 in the inductor.
 As the discharging advances, the current begins to decrease, which is resisted
 by the inductor.
 This recharges the capactor.
 In a system without losses, this would, in theory, continue to repeat itself.
 However, the resonance phenomenon in LC circuits can also be conceptualised
 more intuitively: Reactive components such as capacitors and inductors
 can be viewed as frequency-varying resistors.
 Capacitor impedance is given by 
\begin_inset Formula $\frac{1}{j\omega C}$
\end_inset

, thus capacitors function as a short for frequencies as they increase arbitrari
ly, and an open at DC.
 Inductor impedance 
\begin_inset Formula $j\omega L$
\end_inset

 has the reversed characteristic, as it causes inductors to function as
 an open for frequencies as they increase arbitrarily but as a short at
 DC.
 When connected together, it is therefore clear that there will exist some
 frequency 'sweet spot' where the capacitative and inductive reactances
 are equal and cancel one another.
 This occurs at the resonant frequency.
 The cancellation phenomenon entails that there is no phase shift in such
 circuits, resulting in a current that is in phase with the voltage.
 Due to losses in the circuit, these oscillations eventually decay - this
 phenomenon is 
\begin_inset Formula $\emph{damping}$
\end_inset

.
 By solving the characteristic ODE of the LC pair for some initial conditions,
 it can be shown that the resonant frequency can be determined by the choice
 of 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $C$
\end_inset

 and it given by 
\begin_inset Formula $\omega_{res}=\frac{1}{2\pi\sqrt{LC}}[Hz]$
\end_inset

.
 This can equivalently be seen by equating the reactances of the components.
 This ability to choose the required frequency by changing the capacitative
 and inductive components will be important for the design of LC oscillators.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
\noindent
If we would like to model LC resonance more realistically, and therefore
 consider a model which accounts for the internal resistance which would
 be an inevitable property of the wire and components, we can use the following
 model when designing resonators containing an LC pair.
\end_layout

\begin_layout Example
\noindent
\begin_inset Formula $\emph{Parallel Resonance Circuit}$
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "key-1"
literal "false"

\end_inset

- Consider the model in Figure .
 
\begin_inset Formula $R_{L}$
\end_inset

 and 
\begin_inset Formula $R_{i}$
\end_inset

 are taken to be the parasitic inductance of the inductor and current source
 respectively.
 The series resistance of the capacitance is not denoted with a subscript
 as in most such circuits, the parasitic impedance is not attributed to
 the plate capacitor[2].
 
\end_layout

\begin_layout Example
\noindent
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{circuitikz}[american, voltage shift=0.5]     
\backslash
draw (-2,0) to[isource, label = $i$] (-2, 4) to (-1,4) to[resistor, label=$R_i$]
 (-1,0) to (-2,0);     
\backslash
draw (0,0) to (2,0) to[capacitor, label =${C}$] (2,2) to[resistor, label
 = $R$] (2,4) to (0,4) to[resistor, label =${R_L}$] (0,2) to[cute inductor,
 label=${L}$] (0,0);     
\backslash
node at (1,4)[circle,fill,inner sep=2pt]{};     
\backslash
node at (1,0)[circle,fill,inner sep=2pt]{};     
\backslash
node at (-1.5,4)[circle,fill,inner sep=2pt]{};     
\backslash
node at (-1.5,0)[circle,fill,inner sep=2pt]{};     
\backslash
draw (-1.5,4) to (-1.5,4.2) to (1,4.2) to (1,4);     
\backslash
draw (-1.5,0) to (-1.5,-0.2) to (1,-0.2) to (1,0); 
\backslash
end{circuitikz}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Parallel Resonance Circuit
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Definition*
\begin_inset Formula $\emph{The Quality Factor of a Resonance Circuit}$
\end_inset


\begin_inset Formula $\sim$
\end_inset

 The Q factor of a resonanting system is defined as the the product of 
\begin_inset Formula $2\pi$
\end_inset

 and the ratio between the total energy of the system and that lost in a
 single period
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Definition*
\begin_inset Formula $Tank\;Circuit$
\end_inset


\begin_inset Formula $\sim$
\end_inset

 The sub-circuit within an oscillator which is the source of the resonance
 ultimately sets and generates a signal a the required frequency (e.g.
 an LC pair)
\end_layout

\begin_layout Subsubsection
Amplification in LC Oscillators
\end_layout

\begin_layout Standard
As we have seen above, the resonance is what fundamentally generates the
 oscillations at the required frequency.
 But as has also been discussed, such resonance circuits result in decaying
 oscillations at the resonant frequency, as opposed to 
\begin_inset Formula $\emph{sustained}$
\end_inset

 oscillations.
 These losses are what necessitate amplification.
 The DC input is used to give power to an amplifcation stage which 'corrects'
 the losses of the resonator circuit.
 In this way, the oscillating signal can be rebuilt every cycle, sustaining
 the oscillation output.
 The amplification stage typically consists of a standard small-signal BJT
 or FET network.
 The gain of the ampification stage is a very sensitive and critical part
 of the process as the goal of the circuit is to produce stable and continuous
 output.
 Therefore, if the gain is too low, the signal will decay as it would in
 an LC pair with no amplification, but if it is too high, the signal will
 continue to increase and become distorted.
 When the signal increases to a point, a clipping phenomenon will begin
 to occur.
 We therefore need to ensure that the gain and the frequency selection entering
 the amplifier is controlled assiduously.
\end_layout

\begin_layout Subsubsection
Feedback Analysis of LC Oscillators
\end_layout

\begin_layout Standard
Here, we will discuss how the study of LC oscillators can be understood
 via the study of their feedback mechanisms.
 
\end_layout

\begin_layout Subsection
Existing oscillator models and their properties
\end_layout

\begin_layout Subsubsection
Colpitts Oscillators
\end_layout

\begin_layout Paragraph
Basic principles and tank circuit topology
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{center}
\backslash
begin{circuitikz} 
\backslash
draw (0,0) to[inductor, l=$L$] (0,3) to (1,3) to (1,3.5) to (0,3.5) node[left]{inp
ut}; 
\backslash
draw (1,3) to (2,3) to[capacitor, l = $C_1$] (2,1.5) to [capacitor, l=$C_2$]
 (2,0) to (0,0); 
\backslash
draw (1,0) to (1,-0.5) to (0,-0.5) node[left]{amp}; 
\backslash
draw (2,1.5) to (2.5, 1.5) node[right]{ output} 
\backslash
node at (2,1.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (2.5,1.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (0,3.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (0,-0.5)[circle,fill,inner sep=2pt]{};
\end_layout

\begin_layout Plain Layout


\backslash
end{circuitikz}
\backslash
end{center}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Colpitts Tank Circuit
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
Cross Coupled Oscillators
\end_layout

\begin_layout Paragraph
Topology
\end_layout

\begin_layout Paragraph
Basic Principles
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
Hartley Oscillators
\end_layout

\begin_layout Paragraph
Basic principles and tank circuit topology
\end_layout

\begin_layout Standard
The Hartley oscillator deploys a tank circuit consisting of two serially
 connected inductors - 
\begin_inset Formula $L_{1}$
\end_inset

 and 
\begin_inset Formula $L_{2}$
\end_inset

- together connected in parallel with a capacitor 
\begin_inset Formula $C$
\end_inset

.
 The oscillatory output is collected from in between the inductor connection.
 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{center}
\backslash
begin{circuitikz} 
\backslash
draw (0,0) to[capacitor, l=$C$] (0,3) to (1,3) to (1,3.5) to (0,3.5) node[left]{in
put}; 
\backslash
draw (1,3) to (2,3) to[inductor, l = $L_1$] (2,1.5) to [inductor, l=$L_2$]
 (2,0) to (0,0); 
\backslash
draw (1,0) to (1,-0.5) to (0,-0.5) node[left]{amp}; 
\backslash
draw (2,1.5) to (2.5, 1.5) node[right]{ output} 
\backslash
node at (2,1.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (2.5,1.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (0,3.5)[circle,fill,inner sep=2pt]{}; 
\backslash
node at (0,-0.5)[circle,fill,inner sep=2pt]{};
\end_layout

\begin_layout Plain Layout


\backslash
end{circuitikz}
\backslash
end{center}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Hartley Tank Circuit
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
The goal of the serial inductor connection is to find just the right amoung
 of electromagnetic coupling needed in order to sustain the oscillations
 via feedback and prevent, both, the oscillations from decaying, resulting
 in no output, and from growing, resulting in the physical limit of the
 circuit being reached, leading to distortion.
 The connection between electromagnetic coupling and voltage is somewhat
 intuitive - 
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Itemize
Greater ease of controlling oscillation amplitude
\end_layout

\begin_layout Itemize
Greater ease of tuning to required frequency
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
RC Oscillators
\end_layout

\begin_layout Paragraph
Topology
\end_layout

\begin_layout Paragraph
Basic Principles
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
Quartz Crystal technologies
\end_layout

\begin_layout Paragraph
Topology
\end_layout

\begin_layout Paragraph
Basic Principles
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
Ring Oscillators
\end_layout

\begin_layout Paragraph
Basic principles and circuit topology
\end_layout

\begin_layout Standard
The Ring oscillator is arguably the simplest form of any oscillator, because
 its implementation can consist of just building an oscillator around the
 Barkhausen rules or rather their corresponding intuition.
 In that way, Ring oscillators typically just involve an odd number of inverting
 stages that are organised as such to ensure that the required phase is
 accessible for some oscillatory frequency.
 Likewise, it is easy to give each stage some amplification gain which keeps
 this restriction fulfilled as well.
 The period of a Ring oscillator is determined simply by the time take for
 the signal to propogate one full cycle through all inverting stages.
 In order to decrease the frequency, the number of stages can be increased.
 To compute the frequency, once need only sum the delays 
\begin_inset Formula $D_{i}$
\end_inset

 through each stage,
\begin_inset Formula 
\[
f=\frac{1}{\sum_{i=1}^{n}D_{i}}[\text{Hz}]
\]

\end_inset


\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Itemize
Intuitive design and Simplicity
\end_layout

\begin_layout Itemize
Frequency tuning (particularly with regard to low frequencies - increase
 the number of stages)
\end_layout

\begin_layout Itemize
Power consumption tuning (stages can be designed individually for low power
 consumption)
\end_layout

\begin_layout Itemize
Integration (very easy to integrate)
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Itemize
High Phase Noise
\end_layout

\begin_layout Itemize
Sensitivity to operating conditions
\end_layout

\begin_layout Itemize
Poor spectral purity (due to being based on stage delay)
\end_layout

\begin_layout Subsubsection
Vackar Oscillators
\end_layout

\begin_layout Paragraph
Topology
\end_layout

\begin_layout Paragraph
Basic Principles
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Subsubsection
Clapp Oscillators
\end_layout

\begin_layout Paragraph
Topology
\end_layout

\begin_layout Paragraph
Basic Principles
\end_layout

\begin_layout Paragraph
Advantages
\end_layout

\begin_layout Paragraph
Disadvantages
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Design
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
Testing
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section*
Appendix and tangential concepts
\end_layout

\begin_layout Subsection*
Cumulative Electromagnetic Coupling of Inductors
\end_layout

\begin_layout Standard
Cumulative coupling of serially connected inductors is a relevant phenomenon
 when considering oscillators that involve inductors that are connected
 to one another in series - such as the Hartley oscillator.
 It is simple to show that that the equivalent inductance of 
\begin_inset Formula $n$
\end_inset

 inductors connected in series is simple 
\begin_inset Formula $L_{tot}=\sum_{i=1}^{n}L_{i}$
\end_inset

, however, it should be noted that this result assumes no electromagnetic
 coupling between inductors.
 If inductors are not serially connected with sufficient distance between
 them, the magnetic fields generated within and around the inductors clash
 with the others.
 This magnetic coupling can change the the total inductance.
 The size of the change depends on the distance between the inductors as
 well as their orientation in space.
 If the current in the inductors flows in the same physical direction, we
 get 
\begin_inset Formula $\emph{cumulative coupling}$
\end_inset

which acts to reinforce the magnetic field, and increases net inductance.
 If the currents flow in opposite directions, we get 
\begin_inset Formula $\emph{differential coupling}$
\end_inset

, which attenuates the magnetic field, and results in lower cumulative inductanc
e.
 In each case, the net inductance must be modified by either adding or subtracti
ng a factor of 
\begin_inset Formula $2M$
\end_inset

 (in the case of only two inductors), respectively, where 
\begin_inset Formula $M$
\end_inset

 is the mutual inductance between the coils.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "key-1"
literal "false"

\end_inset

Behzad Razavi.
 RF Microelectronics.
 2008, pp.
 206â€“210.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "key-1"

\end_inset

Duran Leblebici.
 High Frequency CMOS Analog Integrated Circuits.
 2009
\end_layout

\end_body
\end_document
